<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- D3 JavaScript -->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>Hotan China</title>

  </head> 
  <body style="background-color:rgb(3, 98, 100)"></body>


    <div class="col-8 offset-3 my-5">
        <div class="card">
        <div class="card-body">
            <h5>ChartJS Bar Chart With Json Data</h5>
            <hr>
                <div>
                    <canvas id="chart1" width="400" height="200"></canvas>
                </div>
        </div>
    </div>
</div>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!---script for chart.js-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!---variable that creates the chart 'myChart'-->
    <script>
    const ctx = document.getElementById('chart1');

    </script>

    <script>
        var xmlhttp = new XMLHttpRequest();
        var url = "https://raw.githubusercontent.com/LuzMaria04/Project-03-Team-Crystal-Egg/main/reorganized_data.json";
        xmlhttp.open("GET", url, true);
        xmlhttp.send();
        xmlhttp.onreadystatechange = function(){
            if (this.readyState == 4 && this.status == 200){
                let data = JSON.parse(this.responseText);
                console.log(data.BANGLADESH.City);
                let dataKeys = Object.keys(data);
                let newData = dataKeys.map(key => {
                    let item = data;
                    console.log(item);
                })
                year = data.BANGLADESH.map(function(elem){
                    return elem.year;
                });
                console.log(year); 
            }
        }
        
        const myChart = document.getElementById('chart1');
        new Chart(myChart, {
        // type of chart we want to create
        type: 'line',
        // the data for the chart
        data: {
        labels: item,
        
        // add the data
        datasets: [{
            label: 'PM2.5 (Particles in air)',
            data: dataYear,//[92,116,110,110,102],
            borderWidth: 1,
            backgroundColor: ['teal'],
            borderColor: 'black'
        }]
        },
        options: {
        scales: {
            y: {
            beginAtZero: true
            }
        }
        }
        });

    
    </script>
        </script>

        
    </body>
    </html>